<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TBS – Dashboard</title>
  <link rel="stylesheet" href="./styles.css?v=20241019-3" />
</head>
<body class="portal">
  <div class="layout">
    <aside class="sidebar">
      <div class="brand">TBS Portal</div>
      <nav class="nav">
        <a href="/portal/dashboard.html" data-nav="dashboard">TBS Dashboard</a>
        <a href="/portal/calendar.html" data-nav="calendar">TBS Calendar</a>
        <a href="/portal/staff.html" data-nav="staff">TBS Staff</a>
        <a href="/portal/contractors.html" data-nav="contractors">TBS Contractors</a>
        <a href="/portal/projects.html" data-nav="projects">TBS Projects</a>
        <a href="/portal/warehouse.html" data-nav="warehouse">TBS Warehouse</a>
        <a href="/portal/finance.html" data-nav="finance">TBS Finance</a>
      </nav>
    </aside>

    <div class="content">
      <header class="dash-header">
        <div class="header-logo">
          <img src="../assets/TBSLogo.png" alt="TBS Logo">
          <h1>TBS Dashboard</h1>
        </div>
      </header>
      <div class="burger-menu" id="burgerMenu">
        <span></span>
        <span></span>
        <span></span>
      </div>

      <main id="dash" class="dash-grid">
        <!-- Welcome & User Info -->
        <section class="panel" id="welcome">
          <h2 id="greeting">Welcome</h2>
          <p id="whoami">Loading…</p>
          <p id="datetime" class="datetime"></p>
        </section>

        <!-- Recent Activity Panel -->
        <section class="panel activity-panel" id="recentActivity">
          <h3>Recent Activity</h3>
          <div class="activity-carousel">
            <div class="activity-items" id="activityItems">
              <!-- Activity items will be populated by JavaScript -->
            </div>
            <div class="activity-controls">
              <button class="activity-prev" id="activityPrev">‹</button>
              <span class="activity-counter" id="activityCounter">1-2 of 7</span>
              <button class="activity-next" id="activityNext">›</button>
            </div>
          </div>
        </section>

        <!-- Weather and Projects Container -->
        <div class="weather-projects-container">
          <!-- Weather Panel -->
          <section class="panel weather-panel" id="weather">
            <h3>Weather</h3>
            <div class="weather-info">
              <div class="weather-location" id="location">Loading location...</div>
              <div class="weather-temp" id="weatherTemp">—°C</div>
              <div class="weather-condition" id="weatherCond">—</div>
              <div class="weather-warning" id="weatherWarn" hidden>
                ⚠️ Adverse weather conditions today
              </div>
            </div>
          </section>

          <!-- Active Projects Panel -->
          <section class="panel projects-panel" id="activeProjects">
            <h3>Active Projects</h3>
            <div class="dashboard-projects">
              <div class="dashboard-project-item" onclick="location.href='/portal/projects.html'">
                <div class="dashboard-project-image">
                  <img src="../assets/82walpoleroad.png" alt="82 Walpole Road" class="dashboard-project-img">
                  <span class="dashboard-status-badge active">Active</span>
                </div>
                <div class="dashboard-project-info">
                  <h4 class="dashboard-project-title">82 Walpole Road</h4>
                  <p class="dashboard-project-stage">Foundation Phase</p>
                  <p class="dashboard-project-progress">Progress: 25%</p>
                </div>
              </div>
              
              <div class="dashboard-project-item" onclick="location.href='/portal/projects.html'">
                <div class="dashboard-project-image">
                  <img src="../assets/crownroad.png" alt="Crown Road" class="dashboard-project-img">
                  <span class="dashboard-status-badge active">Active</span>
                </div>
                <div class="dashboard-project-info">
                  <h4 class="dashboard-project-title">Crown Road</h4>
                  <p class="dashboard-project-stage">Finishing</p>
                  <p class="dashboard-project-progress">Progress: 95%</p>
                </div>
              </div>
            </div>
            <div class="dashboard-projects-footer">
              <a href="/portal/projects.html" class="view-all-projects">View All Projects →</a>
            </div>
          </section>
        </div>

        <!-- People and Contractors Container -->
        <div class="people-contractors-container">
          <!-- People Working Today Panel -->
          <section class="panel people-panel" id="peopleWorking">
            <h3>People Working Today</h3>
            <div class="working-staff-compact">
              <div class="staff-member-compact">
                <div class="staff-avatar-compact">
                  <img src="https://ui-avatars.com/api/?name=Danny+Tighe&background=4b7bec&color=fff&size=24" alt="Danny Tighe" class="profile-img">
                </div>
                <div class="staff-info-compact">
                  <span class="staff-name-compact">Danny Tighe</span>
                  <span class="staff-role-compact">Managing Director</span>
                </div>
                <div class="staff-status-compact">
                  <span class="status-indicator active">●</span>
                </div>
              </div>
              
              <div class="staff-member-compact">
                <div class="staff-avatar-compact">
                  <img src="https://ui-avatars.com/api/?name=Pat&background=28a745&color=fff&size=24" alt="Pat" class="profile-img">
                </div>
                <div class="staff-info-compact">
                  <span class="staff-name-compact">Pat</span>
                  <span class="staff-role-compact">Foreman</span>
                </div>
                <div class="staff-status-compact">
                  <span class="status-indicator active">●</span>
                </div>
              </div>
              
              <div class="staff-member-compact">
                <div class="staff-avatar-compact">
                  <img src="https://ui-avatars.com/api/?name=Adam&background=ffc107&color=000&size=24" alt="Adam" class="profile-img">
                </div>
                <div class="staff-info-compact">
                  <span class="staff-name-compact">Adam</span>
                  <span class="staff-role-compact">Foreman</span>
                </div>
                <div class="staff-status-compact">
                  <span class="status-indicator active">●</span>
                </div>
              </div>
              
              <div class="staff-member-compact">
                <div class="staff-avatar-compact">
                  <img src="https://ui-avatars.com/api/?name=Charlie&background=17a2b8&color=fff&size=24" alt="Charlie" class="profile-img">
                </div>
                <div class="staff-info-compact">
                  <span class="staff-name-compact">Charlie</span>
                  <span class="staff-role-compact">Labourer</span>
                </div>
                <div class="staff-status-compact">
                  <span class="status-indicator active">●</span>
                </div>
              </div>
            </div>
            <div class="panel-footer">
              <a href="/portal/staff.html" class="view-all-link">Manage Staff →</a>
            </div>
          </section>

          <!-- Contractors Working Today Panel -->
          <section class="panel contractors-panel" id="contractorsWorking">
            <h3>Contractors Working Today</h3>
            <div class="working-contractors-compact">
              <div class="contractor-member-compact">
                <div class="contractor-avatar-compact">
                  <img src="https://ui-avatars.com/api/?name=John+Smith&background=8b5cf6&color=fff&size=24" alt="John Smith" class="profile-img">
                </div>
                <div class="contractor-info-compact">
                  <span class="contractor-name-compact">John Smith</span>
                  <span class="contractor-role-compact">Electrician</span>
                </div>
                <div class="contractor-status-compact">
                  <span class="status-indicator active">●</span>
                </div>
              </div>
              
              <div class="contractor-member-compact">
                <div class="contractor-avatar-compact">
                  <img src="https://ui-avatars.com/api/?name=Mike+Johnson&background=f59e0b&color=fff&size=24" alt="Mike Johnson" class="profile-img">
                </div>
                <div class="contractor-info-compact">
                  <span class="contractor-name-compact">Mike Johnson</span>
                  <span class="contractor-role-compact">Plumber</span>
                </div>
                <div class="contractor-status-compact">
                  <span class="status-indicator active">●</span>
                </div>
              </div>
              
              <div class="contractor-member-compact">
                <div class="contractor-avatar-compact">
                  <img src="https://ui-avatars.com/api/?name=Sarah+Wilson&background=ec4899&color=fff&size=24" alt="Sarah Wilson" class="profile-img">
                </div>
                <div class="contractor-info-compact">
                  <span class="contractor-name-compact">Sarah Wilson</span>
                  <span class="contractor-role-compact">Painter</span>
                </div>
                <div class="contractor-status-compact">
                  <span class="status-indicator active">●</span>
                </div>
              </div>
            </div>
            <div class="panel-footer">
              <a href="/portal/contractors.html" class="view-all-link">Manage Contractors →</a>
            </div>
          </section>
        </div>

        <!-- Material Overview Panel -->
        <section class="panel" id="materialOverview">
          <h3>Material Overview</h3>
          <div class="dashboard-materials">
            <div class="dashboard-material-item" onclick="location.href='/portal/warehouse.html'">
              <div class="dashboard-material-image">
                <img src="../assets/bricks.jpg" alt="Bricks" class="dashboard-material-img">
              </div>
              <div class="dashboard-material-info">
                <h4 class="dashboard-material-name">Bricks</h4>
                <p class="dashboard-material-quantity">1,000 units</p>
              </div>
            </div>

            <div class="dashboard-material-item" onclick="location.href='/portal/warehouse.html'">
              <div class="dashboard-material-image">
                <img src="../assets/2x4.jpg" alt="2x4 Timber" class="dashboard-material-img">
              </div>
              <div class="dashboard-material-info">
                <h4 class="dashboard-material-name">2x4's</h4>
                <p class="dashboard-material-quantity">40 units</p>
              </div>
            </div>

            <div class="dashboard-material-item" onclick="location.href='/portal/warehouse.html'">
              <div class="dashboard-material-image">
                <img src="../assets/plasterboards.jpeg" alt="Plaster Boards" class="dashboard-material-img">
              </div>
              <div class="dashboard-material-info">
                <h4 class="dashboard-material-name">Plaster Boards</h4>
                <p class="dashboard-material-quantity">28 units</p>
              </div>
            </div>

            <div class="dashboard-material-item" onclick="location.href='/portal/warehouse.html'">
              <div class="dashboard-material-image">
                <img src="../assets/cement.jpg" alt="Cement Bags" class="dashboard-material-img">
              </div>
              <div class="dashboard-material-info">
                <h4 class="dashboard-material-name">Cement Bags</h4>
                <p class="dashboard-material-quantity">15 bags</p>
              </div>
            </div>

            <div class="dashboard-material-item" onclick="location.href='/portal/warehouse.html'">
              <div class="dashboard-material-image">
                <span class="dashboard-material-icon">🔶</span>
              </div>
              <div class="dashboard-material-info">
                <h4 class="dashboard-material-name">Scrap Copper</h4>
                <p class="dashboard-material-quantity">250 kg</p>
              </div>
            </div>

            <div class="dashboard-material-item" onclick="location.href='/portal/warehouse.html'">
              <div class="dashboard-material-image">
                <span class="dashboard-material-icon">🏠</span>
              </div>
              <div class="dashboard-material-info">
                <h4 class="dashboard-material-name">Laminate Flooring</h4>
                <p class="dashboard-material-quantity">45 rolls</p>
              </div>
            </div>

            <div class="dashboard-material-item" onclick="location.href='/portal/warehouse.html'">
              <div class="dashboard-material-image">
                <span class="dashboard-material-icon">📦</span>
              </div>
              <div class="dashboard-material-info">
                <h4 class="dashboard-material-name">Bags of Drywall</h4>
                <p class="dashboard-material-quantity">32 bags</p>
              </div>
            </div>
          </div>
          <div class="dashboard-materials-footer">
            <a href="/portal/warehouse.html" class="view-all-materials">View All Materials →</a>
          </div>
        </section>

        <!-- New Dashboard Widgets (Metrics) -->
        <div id="dashboardContainer">
          <!-- New dashboard widgets will be loaded here by JavaScript -->
        </div>

      </main>
    </div>
  </div>

  <script src="./app.js" type="module"></script>
  <script src="./dashboard.js" type="module"></script>
</body>
</html>

